name: Check
description: Run all checks for the project, including clippy

default_task:
  command: echo "All checks completed"
  pre_deps:
    - command: echo "Running checks..."
    - task: clean
    - task: parallel
  concurrently:
    - command: echo "Running fake e2e tests..."
    - task: test
  env:
    RUST_BACKTRACE: "1"

tasks:
  check:
    description: Run all checks for the project
    command: exit 0
  parallel:
    description: Run commands in parallel
    command: cargo check
    concurrently:
      - task: fmt-check
      - task: clippy

  clean:
    command: cargo clean

  clippy:
    command: cargo clippy

  test:
    command: cargo test

  fmt-check:
    description: Check code formatting
    command: cargo fmt --check
